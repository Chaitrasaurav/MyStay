function lightboxOpen(){window.scrollTo(0,0),document.getElementById("light").style.display="block",document.getElementById("fade").style.display="block"}function lightboxClose(){document.getElementById("light").style.display="none",document.getElementById("fade").style.display="none"}!function(t,e,a){"use strict";function s(t){for(var e="",s=0;s<cityHotelMap[t].hotels.length;s++){var i=cityHotelMap[t].hotels[s];e+='<div><img data-lazy="../dist/images/'+i.img+'" /> <h6>'+i.name+"</h6> <p>"+i.address+'</p> <button class="js-slider-choose" data-city="'+t+'" data-hotel="'+i.name+'" data-property="'+i.id+'">Select Hotel</button></div>'}a(".js-slider").empty().append(e).slick({lazyLoad:"ondemand",slidesToShow:4,speed:2e3,slidesToScroll:4,dots:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,dots:!0}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!0,dotsClass:"custom_paging",customPaging:function(t,e){return'<a class="custom-dot"><span class="string">'+(e+1)+"/"+t.slideCount+"</span></a>"}}}]}),setTimeout(function(){var t=a(".slick-track").height();a(".slick-slide").css("height",t-15+"px")},100)}t.myStays={};var i='<option value="">Please select a Hotel</option>';myStays.init=function(){function e(t,e){a(".js-datepicker-container").each(function(s,i){var l=a.datepicker._getInst(i);l.drawMonth=l.selectedMonth=t,l.drawYear=l.selectedYear=e,a.datepicker._notifyChange(l),a.datepicker._adjustDate(i)})}function l(t){if(!t.disabled){var e="";return h[t.id].hotels.length>1?e+="<span> ("+h[t.id].hotels.length+" Hotels) </span>":e+="<span> ("+h[t.id].hotels.length+" Hotel) </span>",a('<p class="option-city">'+t.text+" "+e+"<p>")}}function o(t){if(!t.disabled){var e=a('.js-tabs li[data-tab="'+t.id+'"]').find("i")[0].outerHTML;return a('<span class="option-tab">'+e+t.text+"<span>")}}function n(t,e,s){if(s.id.length){var i=a(s.element).data("keys");return String(i).toUpperCase().indexOf(String(t).toUpperCase())>-1}}function c(t){if(a(".js-datepicker-modal").hasClass("hidden")||a(".js-datepicker-modal").addClass("hidden"),a(".js-select-guest-container").hasClass("hidden")||a(".js-select-guest-container").addClass("hidden"),t.id&&t.id.length){d.term;return t.text}}function r(t){return t.text}var d={},h=t.cityHotelMap;a.datepicker.regional[a("body").data("i18n")],a("input.js-datepicker").click(function(t){if(a(".js-select-guest-container").hasClass("hidden")||a(".js-select-guest-container").addClass("hidden"),a(".js-datepicker-modal").removeClass("hidden"),a(".check-in").removeClass("js-is-invalid"),a(".check-out").removeClass("js-is-invalid"),a(t.target).hasClass("check-in"))if(a(t.target).val()){s=a(t.target).val();e(new Date(s).getMonth(),new Date(s).getFullYear()),a(".check-out").removeClass("js-datepicker-highlight"),a(t.target).addClass("js-datepicker-highlight")}else a(t.target).addClass("js-datepicker-highlight"),a(".js-datepicker-container").datepicker("option","gotoCurrent",!0);else if(a(t.target).hasClass("check-out"))if(a(t.target).val()){s=a(t.target).val();e(new Date(s).getMonth(),new Date(s).getFullYear()),a(".check-in").addClass("js-datepicker-highlight")}else if(a(".check-in").val().length){a(t.target).addClass("js-datepicker-highlight"),a(".check-in").removeClass("js-datepicker-highlight");var s=a(".check-in").val();e(new Date(s).getMonth(),new Date(s).getFullYear())}else a(".check-in").addClass("js-datepicker-highlight"),a(".js-datepicker-container").datepicker("option","gotoCurrent",!0)});var p=2;a(t).width()<768&&(p=1),a(".js-datepicker-container").datepicker({minDate:0,numberOfMonths:p,beforeShowDay:function(t){var e=a.datepicker.parseDate(a.datepicker._defaults.dateFormat,a("#checkIn").val()),s=a.datepicker.parseDate(a.datepicker._defaults.dateFormat,a("#checkOut").val()),i="dp-highlight";return(e&&t.getTime()==e.getTime()||s&&t.getTime()==s.getTime())&&(i="dp-highlighted"),e&&!s&&t>e&&(i="dp-highlight-hover"),[!0,e&&(t.getTime()==e.getTime()||!s&&t>e||s&&t>=e&&t<=s)?i:""]},onSelect:function(t,e){var s=a.datepicker.parseDate(a.datepicker._defaults.dateFormat,a("#checkIn").val()),i=a.datepicker.parseDate(a.datepicker._defaults.dateFormat,a("#checkOut").val()),l=a.datepicker.parseDate(a.datepicker._defaults.dateFormat,t);if(!s||i?(a("#checkIn").val(t).removeClass("js-datepicker-highlight"),a("#checkIn").hasClass("js-is-invalid")&&a("#checkIn").removeClass("js-is-invalid"),a("#checkOut").val("").addClass("js-datepicker-highlight"),a(this).datepicker()):l<s?(a("#checkIn").val(t),a("#checkIn").hasClass("js-is-invalid")&&a("#checkIn").removeClass("js-is-invalid"),a("#checkIn").hasClass("js-datepicker-highlight")&&(a("#checkIn").removeClass("js-datepicker-highlight"),a("#checkOut").addClass("js-datepicker-highlight")),a(this).datepicker()):(a("#checkIn").hasClass("js-datepicker-highlight")?(a("#checkIn").val(t).removeClass("js-datepicker-highlight"),a("#checkOut").addClass("js-datepicker-highlight")):(a("#checkOut").val(t).removeClass("js-datepicker-highlight"),a("#checkOut").hasClass("js-is-invalid")||a("#checkOut").removeClass("js-is-invalid"),a(".js-datepicker-modal").hasClass("hidden")||a(".js-datepicker-modal").addClass("hidden")),a(this).datepicker()),a("body").hasClass("ja_JP")){if(a("#checkIn").val().length){o=a("#checkIn").val().split("-");a("#checkIn").siblings('input[name="ciDateY"]').val(o[0]),a("#checkIn").siblings('input[name="ciDateM"]').val(o[1]),a("#checkIn").siblings('input[name="ciDateD"]').val(o[2])}if(a("#checkOut").val().length){var o=a("#checkOut").val().split("-");a("#checkOut").siblings('input[name="coDateY"]').val(o[0]),a("#checkOut").siblings('input[name="coDateM"]').val(o[1]),a("#checkOut").siblings('input[name="coDateD"]').val(o[2])}}}}),a(".js-close-datepicker").click(function(){a(".js-datepicker-modal").addClass("hidden")}),a(".js-slider-control").select2({containerCssClass:"city-container",dropdownCssClass:"city-container-options",minimumResultsForSearch:-1,templateResult:l,templateSelection:l}),a(".js-tabs-select").select2({containerCssClass:"tab-select-container",dropdownCssClass:"tab-select-container-options",minimumResultsForSearch:-1,templateResult:o,templateSelection:o}),a.fn.select2.amd.require(["select2/compat/matcher"],function(t){a(".js-city").select2({containerCssClass:"form-city-container",dropdownCssClass:"form-city-container-options",matcher:t(n),templateResult:c,templateSelection:r,language:{searching:function(t){return d=t,"Searching…"}}})}),a.fn.select2.amd.require(["select2/compat/matcher"],function(t){a(".js-hotel").select2({containerCssClass:"form-city-container",dropdownCssClass:"form-city-container-options",matcher:t(n),templateResult:c,templateSelection:r,language:{searching:function(t){return d=t,"Searching…"}}})});a(".js-datepicker").focus(function(){a("html, body").animate({scrollTop:a(this).offset().top-25},1e3)});for(var u in h){for(var g=h[u].hotels,m=0;m<g.length;m++){var v=g[m].localName?g[m].localName:g[m].name;i+='<option data-keys="'+v+'" value="'+g[m].id+'">'+g[m].name+"</option>"}a(".js-hotel").html(i)}s("tokyo")},a(e).on("mouseover",".ui-datepicker-calendar td a",function(t){a(".check-out").hasClass("js-datepicker-highlight")&&(a(this).parents(".ui-datepicker-group").prevAll().find("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),a(this).parents("tr").prevAll().find("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),a(this).parent("td").prevAll("td.dp-highlight-hover").removeClass("last-cell").addClass("new-cell"),a(this).parent("td.dp-highlight-hover").addClass("last-cell"),a(this).parent("td").nextAll("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"),a(this).parents("tr").nextAll().find("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"),a(this).parents(".ui-datepicker-group").nextAll().find("td.dp-highlight-hover").removeClass("last-cell").removeClass("new-cell"))}),a("#main-form-btn").on("click",function(){var e=a(this).parents("form"),s=!0;if(e.find(":input.required").each(function(t){this.value.length?a(this).removeClass("js-is-invalid"):!a("body").hasClass("ja_JP")&&a(this).hasClass("js-city")&&a(this).parents("form").find(".js-hotel").val().length?a(this).removeClass("js-is-invalid"):(s=!1,a(this).addClass("js-is-invalid"))}),s){var i,l="";a("body").hasClass("ja_JP")?(e.serializeArray().forEach(function(t){l+="&"+t.name+"="+t.value}),i="https://mystays.rwiths.net/r-withs/tfs0020a.do?"+l):("property"===e.serializeArray()[0].name&&""===e.serializeArray()[0].value?(l="s=group&group=asiaflexstayinn&filters[region]="+t.cityHotelMap[e.find("#city").val()].city,e.serializeArray().forEach(function(t){"property"!==t.name&&(l+="&"+t.name+"="+t.value)})):(l="s=results",e.serializeArray().forEach(function(t){l+="&"+t.name+"="+t.value})),i="https://www.book-secure.com/index.php?"+l),t.open(i,"_blank").focus()}}),a(".js-city").on("change",function(t){var e=t.target.value,s=cityHotelMap[e].hotels,i='<option value="">Please select a Hotel</option>';if(s.length){for(var l=0;l<s.length;l++)i+='<option data-keys="'+(s[l].localName?s[l].localName:s[l].name)+'" value="'+s[l].id+'">'+s[l].name+"</option>";a(".js-hotel").empty().html(i),a(".js-hotel").val("").trigger("change")}a(t.target).hasClass("required")&&a(t.target).hasClass("js-is-invalid")&&a(t.target).removeClass("js-is-invalid")}),a(".js-hotel").on("change",function(t){"jptok28108"!==t.target.value&&"151373"!==t.target.value||(a(t.target).parents("form").find(".js-select-guest").val(1),a(t.target).parents("form").find(".js-total-adult").val(1)),a(t.target).hasClass("required")&&a(t.target).hasClass("js-is-invalid")&&a(t.target).removeClass("js-is-invalid"),!a("body").hasClass("ja_JP")&&a(t.target).parents("form").find(".js-city").hasClass("required")&&a(t.target).parents("form").find(".js-city").hasClass("js-is-invalid")&&a(t.target).parents("form").find(".js-city").removeClass("js-is-invalid")}),a(".js-check-box").change(function(){a(this).is(":checked")?a(".js-main-form-btn").empty().text("Book Now with Pepper"):a(".js-main-form-btn").empty().text("Members Only"),a(".js-main-form-btn").toggleClass("disabled").attr("disabled",!a(this).is(":checked"))}),a(".js-slider-control").on("change",function(t){var e=t.target.value;a(".js-slider").slick("unslick"),s(e)}),a(".js-slider").on("click",".js-slider-choose",function(t){var e=a(this).data();a("html, body").animate({scrollTop:a("#mainForm").offset().top},1e3),a("#mainForm").find("#city").val(e.city).trigger("change"),a("#mainForm").find("#property").val(e.property).trigger("change")}),a(".js-tabs-select").on("change",function(t){var e=a(this).val();a("ul.tabs li").removeClass("current"),a(".tab-content").removeClass("current"),a('ul.js-tabs li[data-tab="'+e+'"]').addClass("current"),a("#"+e).addClass("current")}),a("ul.js-tabs li").click(function(){var t=a(this).attr("data-tab");a("ul.js-tabs li").removeClass("current"),a(".tab-content").removeClass("current"),a(".js-tabs-select").val(t).trigger("change"),a(this).addClass("current"),a("#"+t).addClass("current")}),a(".campaign_link").click(function(){a("html,body").animate({scrollTop:a(".stage__form").offset().top},1e3)}),a(".subscribe_link").click(function(){a("html,body").animate({scrollTop:a(".subscribe_container").offset().top},1e3)}),a(e).keyup(function(t){27==t.keyCode&&(a("ul.header_language").hasClass("active")&&a("ul.header_language").removeClass("active"),a(".js-datepicker-modal").hasClass("hidden")||(a(".js-datepicker-modal").addClass("hidden"),a("#checkIn").removeClass("js-datepicker-highlight"),a("#checkOut").removeClass("js-datepicker-highlight")),lightboxClose())}),a(e).click(function(t){a(t.target).hasClass("select-language")||a(t.target).parent().hasClass("select-language")||a("ul.header_language").removeClass("active"),a(t.target).hasClass("js-datepicker-modal")||a(t.target).parents().hasClass("js-datepicker-modal")||a(t.target).parents().hasClass("ui-datepicker-header")||a(t.target).hasClass("js-datepicker")||(a(".js-datepicker-modal").addClass("hidden"),a("#checkIn").removeClass("js-datepicker-highlight"),a("#checkOut").removeClass("js-datepicker-highlight"))}),a(".select-language").click(function(){a("ul.header_language").toggleClass("active")}),a(".hamburger-menu").click(function(){a(".header_links").toggleClass("active")}),a(t).width()<767&&a(".sitemap_links").click(function(t){a(".sitemap_links").removeClass("current"),a(this).addClass("current"),a(".sitemap_links ul").removeClass("active"),a(this).children("ul").toggleClass("active")}),a(".js-select-guest").on("click",function(t){a(".js-select-guest-container").toggleClass("hidden"),a("html, body").animate({scrollTop:a(".js-select-guest").offset().top},1e3)}),a(".js-cancel-select-guest").on("click",function(){a(".js-select-guest-container").toggleClass("hidden"),a("html, body").animate({scrollTop:a("#mainForm").offset().top},1e3)}),a(".js-add-room").on("click",function(){var t=a(".js-room-list").find("li").length+1,e='<li class="js-room room clearfix" data-room="'+t+'">\t\t\t\t\t\t<div class="room-container clearfix">\t\t\t\t\t\t\t<p class="room__heading">Room'+t+'</p>\t\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t\t<label class="room__label form__label">Adults</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="room__field form__field js-adult-count">\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2" selected>2</option>\t\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t\t<label class="room__label form__label">Children</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="room__field form__field js-child-count">\t\t\t\t\t\t\t\t\t\t<option value="0">0</option>\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="room__delete">\t\t\t\t\t\t\t<a href="javascript:;" title="Delete this room" class="room__delete-btn js-delete-room"><i class="icon delete-icon"></i></a>\t\t\t\t\t\t</div>\t\t\t\t\t</li>';a(".js-room-list").append(e)}),a(".js-room-list").on("click",".js-delete-room",function(t){a(this).parents("li").remove()}),a(".js-room-list").on("change",".js-child-count",function(t){var e=a(this),s=e.val(),i=e.parents(".js-room").find(".js-child-age-list");i.empty();for(var l=0;l<s;l++){var o='<p class="room__heading">Ages</p>\t\t\t\t\t\t\t<div class="form__con js-child-age-ele">\t\t\t\t\t\t\t\t<label class="form__label">Child '+(l+1)+'</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="form__field">\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t\t\t<option value="8">8</option>\t\t\t\t\t\t\t\t\t\t<option value="9">9</option>\t\t\t\t\t\t\t\t\t\t<option value="10">10</option>\t\t\t\t\t\t\t\t\t\t<option value="11">11</option>\t\t\t\t\t\t\t\t\t\t<option value="12">12</option>\t\t\t\t\t\t\t\t\t\t<option value="13">13</option>\t\t\t\t\t\t\t\t\t\t<option value="14">14</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>';i.append(o)}}),a(".js-confirm").on("click",function(){for(var t=a(".js-select-guest-container").find(".js-adult-count"),e=a(".js-select-guest-container").find(".js-child-count"),s=0,i=0,l=0;l<t.length;l++)s+=Number(t[l].value);for(l=0;l<e.length;l++)i+=Number(e[l].value);a(".js-select-guest").val(s+i),a(".js-total-adult").val(s),a(".js-total-children").val(i),a(".js-total-room").val(a(".js-room").length),a(".js-select-guest-container").toggleClass("hidden"),a("html, body").animate({scrollTop:a("#mainForm").offset().top},1e3)}),a(e).ready(myStays.init)}(window,document,jQuery);