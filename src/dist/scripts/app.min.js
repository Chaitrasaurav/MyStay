function lightboxOpen(){window.scrollTo(0,0),document.getElementById("light").style.display="block",document.getElementById("fade").style.display="block"}function lightboxClose(){document.getElementById("light").style.display="none",document.getElementById("fade").style.display="none"}!function(t,e,o){"use strict";function s(t){for(var e="",s=0;s<cityHotelMap[t].hotels.length;s++){var a=cityHotelMap[t].hotels[s];e+='<div><img data-lazy="../dist/images/'+a.img+'" /> <h6>'+a.name+"</h6> <p>"+a.address+'</p> <button class="js-slider-choose" data-city="'+t+'" data-hotel="'+a.name+'" data-property="'+a.id+'">Select Hotel</button></div>'}o(".js-slider").empty().append(e).slick({lazyLoad:"ondemand",slidesToShow:4,speed:2e3,slidesToScroll:4,dots:!0,responsive:[{breakpoint:1024,settings:{slidesToShow:3,slidesToScroll:3,dots:!0}},{breakpoint:900,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:600,settings:{slidesToShow:1,slidesToScroll:1,centerMode:!0,dotsClass:"custom_paging",customPaging:function(t,e){return console.log(t),'<a class="custom-dot"><span class="string">'+(e+1)+"/"+t.slideCount+"</span></a>"}}}]})}t.myStays={};var a='<option value="">Please select a Hotel</option>';myStays.init=function(){function e(t){if(!t.disabled){var e="";return p[t.id].hotels.length>1?e+="<span> ("+p[t.id].hotels.length+" Hotels) </span>":e+="<span> ("+p[t.id].hotels.length+" Hotel) </span>",o('<p class="option-city">'+t.text+" "+e+"<p>")}}function i(t){if(!t.disabled){var e=o('.js-tabs li[data-tab="'+t.id+'"]').find("i")[0].outerHTML;return o('<span class="option-tab">'+e+t.text+"<span>")}}function n(t,e,o){if(o.id.length)return e.toUpperCase().indexOf(t.toUpperCase())>-1}function l(t){if(t.id&&t.id.length){var e=d.term||"";return r(t.text,e)}}function c(t){return t.text}function r(t,e){var s=t.toUpperCase().indexOf(e.toUpperCase()),a=o("<span></span>");if(s<0)return a.text(t);a.text(t.substring(0,s));var i=o('<span class="select2-rendered__match"></span>');return i.text(t.substring(s,s+e.length)),a.append(i),a.append(t.substring(s+e.length)),a}var d={},p=t.cityHotelMap;o(".js-slider-control").select2({containerCssClass:"city-container",dropdownCssClass:"city-container-options",minimumResultsForSearch:-1,templateResult:e,templateSelection:e}),o(".js-tabs-select").select2({containerCssClass:"tab-select-container",dropdownCssClass:"tab-select-container-options",minimumResultsForSearch:-1,templateResult:i,templateSelection:i}),o.fn.select2.amd.require(["select2/compat/matcher"],function(t){o(".js-city").select2({containerCssClass:"form-city-container",dropdownCssClass:"form-city-container-options",matcher:t(n),templateResult:l,templateSelection:c,language:{searching:function(t){return d=t,"Searching…"}}})}),o.fn.select2.amd.require(["select2/compat/matcher"],function(t){o(".js-hotel").select2({containerCssClass:"form-city-container",dropdownCssClass:"form-city-container-options",matcher:t(n),templateResult:l,templateSelection:c,language:{searching:function(t){return d=t,"Searching…"}}})});var u=!1;o(".js-datepicker.check-in").datepicker({dateFormat:"yy-mm-dd",minDate:new Date,onSelect:function(t,e){var s=o(".js-datepicker.check-in").datepicker("getDate");if(s.setDate(s.getDate()+1),o(".js-datepicker.check-out").datepicker("setDate",s),o(".js-datepicker.check-out").datepicker("option","minDate",s),u=!0,o("body").hasClass("ja_JP")){var a=t.split("-");if(o(this).siblings('input[name="ciDateY"]').val(a[0]),o(this).siblings('input[name="ciDateM"]').val(a[1]),o(this).siblings('input[name="ciDateD"]').val(a[2]),!o(".js-datepicker.check-out").val()){var i=s.getMonth()+1;i=i<10?"0"+i:i,o(".js-datepicker.check-out").siblings('input[name="coDateY"]').val(s.getFullYear()),o(".js-datepicker.check-out").siblings('input[name="coDateM"]').val(i),o(".js-datepicker.check-out").siblings('input[name="coDateD"]').val(s.getDate())}}},onClose:function(){u&&(setTimeout(function(){o(".js-datepicker.check-out").datepicker("show")},10),u=!1)},beforeShow:function(t,e){setTimeout(function(){e.dpDiv.css({top:o(".js-datepicker").offset().top+55})},0)}}),o(".js-datepicker.check-out").datepicker({dateFormat:"yy-mm-dd",beforeShow:function(t,e){setTimeout(function(){e.dpDiv.css({top:o(".js-datepicker").offset().top+55})},0)},onSelect:function(t,e){if(o("body").hasClass("ja_JP")){var s=t.split("-");o(this).siblings('input[name="coDateY"]').val(s[0]),o(this).siblings('input[name="coDateM"]').val(s[1]),o(this).siblings('input[name="coDateD"]').val(s[2])}}}),o(".js-datepicker").focus(function(){o("html, body").animate({scrollTop:o(this).offset().top-25},1e3)});for(var m in p){for(var h=p[m].hotels,g=0;g<h.length;g++)a+='<option value="'+h[g].id+'">'+h[g].name+"</option>";o(".js-hotel").html(a)}s("tokyo")},o("#main-form-btn").on("click",function(){var e=o(this).parents("form"),s=!0;if(e.find(":input.required").each(function(t){this.value.length?o(this).removeClass("js-is-invalid"):(s=!1,o(this).addClass("js-is-invalid"))}),s){var a,i="";o("body").hasClass("ja_JP")?(e.serializeArray().forEach(function(t){i+="&"+t.name+"="+t.value}),a="https://mystays.rwiths.net/r-withs/tfs0020a.do?"+i):(i="s=results",e.serializeArray().forEach(function(t){i+="&"+t.name+"="+t.value}),a="https://www.book-secure.com/index.php?"+i),t.open(a,"_blank").focus()}}),o(".js-city").on("change",function(t){var e=t.target.value,s=cityHotelMap[e].hotels,a='<option value="">Please select a Hotel</option>';if(s.length){for(var i=0;i<s.length;i++)a+='<option value="'+s[i].id+'">'+s[i].name+"</option>";o(".js-hotel").empty().html(a),o(".js-hotel").val("").trigger("change")}}),o(".js-check-box").change(function(){o(this).is(":checked")?o(".js-main-form-btn").empty().text("Book Now with Pepper"):o(".js-main-form-btn").empty().text("Members Only"),o(".js-main-form-btn").toggleClass("disabled").attr("disabled",!o(this).is(":checked"))}),o(".js-slider-control").on("change",function(t){var e=t.target.value;o(".js-slider").slick("unslick"),s(e)}),o(".js-slider").on("click",".js-slider-choose",function(t){var e=o(this).data();o("html, body").animate({scrollTop:o("#mainForm").offset().top},2e3),o("#mainForm").find("#city").val(e.city).trigger("change"),o("#mainForm").find("#property").val(e.property).trigger("change")}),o(".js-tabs-select").on("change",function(t){var e=o(this).val();o("ul.tabs li").removeClass("current"),o(".tab-content").removeClass("current"),o('ul.js-tabs li[data-tab="'+e+'"]').addClass("current"),o("#"+e).addClass("current")}),o("ul.js-tabs li").click(function(){var t=o(this).attr("data-tab");o("ul.js-tabs li").removeClass("current"),o(".tab-content").removeClass("current"),o(".js-tabs-select").val(t).trigger("change"),o(this).addClass("current"),o("#"+t).addClass("current")}),o(".campaign_link").click(function(){o("html,body").animate({scrollTop:o(".stage__form").offset().top},3e3)}),o(e).keyup(function(t){27==t.keyCode&&(o("ul.header_language").hasClass("active")&&o("ul.header_language").removeClass("active"),lightboxClose())}),o(e).click(function(t){o(t.target).hasClass("select-language")||o(t.target).parent().hasClass("select-language")||o("ul.header_language").removeClass("active")}),o(".select-language").click(function(){o("ul.header_language").toggleClass("active")}),o(".hamburger-menu").click(function(){o(".header_links").toggleClass("active")}),o(t).width()<767&&o(".sitemap_links").click(function(t){o(".sitemap_links").removeClass("current"),o(this).addClass("current"),o(".sitemap_links ul").removeClass("active"),o(this).children("ul").toggleClass("active")}),o(".js-select-guest").on("click",function(t){o(".js-select-guest-container").toggleClass("hidden"),o("html, body").animate({scrollTop:o(".js-select-guest-container").offset().top},1e3)}),o(".js-cancel-select-guest").on("click",function(){o(".js-select-guest-container").toggleClass("hidden"),o("html, body").animate({scrollTop:o("#mainForm").offset().top},1e3)}),o(".js-add-room").on("click",function(){console.log(o(".js-room-list").find("li").length);var t=o(".js-room-list").find("li").length+1,e='<li class="js-room room clearfix" data-room="'+t+'">\t\t\t\t\t\t<div class="room-container clearfix">\t\t\t\t\t\t\t<p class="room__heading">Room'+t+'</p>\t\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t\t<label class="room__label form__label">Adults</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="room__field form__field js-adult-count">\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t<div class="form__control">\t\t\t\t\t\t\t\t<label class="room__label form__label">Children</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="room__field form__field js-child-count">\t\t\t\t\t\t\t\t\t\t<option value="0">0</option>\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="room__age-container js-child-age-list">\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="room__delete">\t\t\t\t\t\t\t<a href="javascript:;" title="Delete this room" class="room__delete-btn js-delete-room"><i class="icon delete-icon"></i></a>\t\t\t\t\t\t</div>\t\t\t\t\t</li>';o(".js-room-list").append(e)}),o(".js-room-list").on("click",".js-delete-room",function(t){o(this).parents("li").remove()}),o(".js-room-list").on("change",".js-child-count",function(t){var e=o(this),s=e.val(),a=e.parents(".js-room").find(".js-child-age-list");a.empty();for(var i=0;i<s;i++){var n='<p class="room__heading">Ages</p>\t\t\t\t\t\t\t<div class="form__con js-child-age-ele">\t\t\t\t\t\t\t\t<label class="form__label">Child '+(i+1)+'</label>\t\t\t\t\t\t\t\t<div class="input-wrap">\t\t\t\t\t\t\t\t\t<select class="form__field">\t\t\t\t\t\t\t\t\t\t<option value="1">1</option>\t\t\t\t\t\t\t\t\t\t<option value="2">2</option>\t\t\t\t\t\t\t\t\t\t<option value="3">3</option>\t\t\t\t\t\t\t\t\t\t<option value="4">4</option>\t\t\t\t\t\t\t\t\t\t<option value="5">5</option>\t\t\t\t\t\t\t\t\t\t<option value="6">6</option>\t\t\t\t\t\t\t\t\t\t<option value="7">7</option>\t\t\t\t\t\t\t\t\t\t<option value="8">8</option>\t\t\t\t\t\t\t\t\t\t<option value="9">9</option>\t\t\t\t\t\t\t\t\t\t<option value="10">10</option>\t\t\t\t\t\t\t\t\t\t<option value="11">11</option>\t\t\t\t\t\t\t\t\t\t<option value="12">12</option>\t\t\t\t\t\t\t\t\t\t<option value="13">13</option>\t\t\t\t\t\t\t\t\t\t<option value="14">14</option>\t\t\t\t\t\t\t\t\t</select>\t\t\t\t\t\t\t\t</div>\t\t\t\t\t\t\t</div>';a.append(n)}}),o(".js-confirm").on("click",function(){var t=o(".js-select-guest-container").find(".js-adult-count"),e=o(".js-select-guest-container").find(".js-child-count"),s=0,a=0;console.log(t,e);for(i=0;i<t.length;i++)s+=Number(t[i].value);for(var i=0;i<e.length;i++)a+=Number(e[i].value);o(".js-select-guest").val(s),o(".js-total-children").val(a),o(".js-total-room").val(o(".js-room").length),o(".js-select-guest-container").toggleClass("hidden"),o("html, body").animate({scrollTop:o("#mainForm").offset().top},1e3)}),o(e).ready(myStays.init)}(window,document,jQuery);